608060405234801561001057600080fd5b506004361061014d5760003560e01c80638da5cb5b116100c3578063bf0e5b951161007c578063bf0e5b9514610371578063e449f34114610384578063ece5b5be14610397578063f2fde38b1461039f578063f7c618c1146103b2578063f854a27f146103c557600080fd5b80638da5cb5b146102a1578063937b0cf1146102c657806394067045146102d9578063a6fe524414610302578063b22fbc2f14610329578063b5a5e5091461035e57600080fd5b80635312ea8e116101155780635312ea8e146101e25780635a2f3d09146101f55780636f83a1de1461026b578063715018a61461027e5780638aee8127146102865780638c37b9001461029957600080fd5b8063039a1623146101525780630fbf0a9314610167578063257ddfef1461017a578063372500ab146101b65780634ead4327146101be575b600080fd5b610165610160366004611fec565b6103e6565b005b61016561017536600461201f565b6104a8565b61019e6101883660046120a4565b60056020526000908152604090205461ffff1681565b60405161ffff90911681526020015b60405180910390f35b610165610862565b6101d16101cc3660046120d4565b61087d565b6040516101ad9594939291906120f1565b6101656101f0366004612150565b6108ea565b600854600954600a54600b5461022d936001600160401b0380821694600160401b8304821694600160801b9093049091169290919086565b604080516001600160401b039788168152958716602087015293909516928401929092526060830152608082015260a081019190915260c0016101ad565b610165610279366004612169565b610ab0565b610165610b4f565b6101656102943660046120d4565b610b61565b610165610bbe565b6000546001600160a01b03165b6040516001600160a01b0390911681526020016101ad565b6101656102d4366004612291565b610ed4565b6102ae6102e7366004612150565b600c602052600090815260409020546001600160a01b031681565b6102ae7f000000000000000000000000d16e7b3b91f96d027ab46a951fa7f81708f9e7bc81565b61034c610337366004612150565b60046020526000908152604090205460ff1681565b60405160ff90911681526020016101ad565b61016561036c366004612150565b610f59565b61016561037f36600461201f565b610f9e565b61016561039236600461201f565b611283565b61019e611564565b6101656103ad3660046120d4565b61169e565b6002546102ae906001600160a01b031681565b6103d86103d33660046120d4565b61171c565b6040519081526020016101ad565b6103ee61196f565b42816001600160401b031610806104165750806001600160401b0316826001600160401b0316115b15610434576040516309f55df560e41b815260040160405180910390fd5b600880546001600160401b038481166fffffffffffffffffffffffffffffffff199092168217600160401b918516918202179092556040805191825260208201929092527f58de8c7b5e7c520287c9b981c8f628a4c08a47a9eb8dcf06f20782efddb731b391015b60405180910390a15050565b6104b06119c9565b6104b8611a22565b8060005b8181101561075557337f000000000000000000000000d16e7b3b91f96d027ab46a951fa7f81708f9e7bc6001600160a01b0316636352211e86868581811061050657610506612350565b905060200201356040518263ffffffff1660e01b815260040161052b91815260200190565b602060405180830381865afa158015610548573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061056c9190612366565b6001600160a01b031614610593576040516304fa5e4b60e11b815260040160405180910390fd5b7f000000000000000000000000d16e7b3b91f96d027ab46a951fa7f81708f9e7bc6001600160a01b03166323b872dd33308787868181106105d6576105d6612350565b6040516001600160e01b031960e088901b1681526001600160a01b03958616600482015294909316602485015250602090910201356044820152606401600060405180830381600087803b15801561062d57600080fd5b505af1158015610641573d6000803e3d6000fd5b5050505033600c600086868581811061065c5761065c612350565b90506020020135815260200190815260200160002060006101000a8154816001600160a01b0302191690836001600160a01b03160217905550600160056000600460008888878181106106b1576106b1612350565b6020908102929092013583525081810192909252604090810160009081205460ff168452918301939093529101812080549091906106f490849061ffff16612399565b92506101000a81548161ffff021916908361ffff16021790555061074484848381811061072357610723612350565b33600090815260036020908152604090912060040193910201359050611bbf565b5061074e816123b4565b90506104bc565b5033600090815260036020526040812080546001600160401b038416929061077e9084906123cd565b909155505033600081815260036020526040902042600190910155600b54906107a690611bd4565b61ffff166107b491906123e0565b3360009081526003602081905260409091200155600880548291906010906107ed908490600160801b90046001600160401b03166123f7565b92506101000a8154816001600160401b0302191690836001600160401b03160217905550336001600160a01b03167f1b8c28a861677c5b3b8831f33525650871ec61463da5ed7ae1d08d4628711a86848460405161084c929190612417565b60405180910390a25061085e60018055565b5050565b61086a6119c9565b610872611a22565b61087b60018055565b565b600080606060008061088e8661171c565b6001600160a01b03871660009081526003602052604090208054600182015492945091906108be90600401611d6a565b6001600160a01b0398909816600090815260036020526040902060020154919890979650929450925050565b6108f261196f565b6002546040516370a0823160e01b81523060048201526000916001600160a01b03169063a9059cbb903390606490869085906370a0823190602401602060405180830381865afa15801561094a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061096e9190612450565b61097891906123e0565b6109829190612469565b6040516001600160e01b031960e085901b1681526001600160a01b03909216600483015260248201526044016020604051808303816000875af11580156109cd573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109f1919061248b565b9050806109fd57600080fd5b6002546040516370a0823160e01b81523060048201527f99d7f8b71cfb9126984f7a5eed3a40e64a8959e9b0e442221546fb04ec6a489c9160649185916001600160a01b0316906370a0823190602401602060405180830381865afa158015610a6a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a8e9190612450565b610a9891906123e0565b610aa29190612469565b60405190815260200161049c565b610ab861196f565b6007805460ff86811661ffff1990921682176101008783169081029190911763ffff000019166201000087841690810263ff00000019169190911763010000009387169384021790945560408051938452602084019190915282810193909352606082015290517f9d814305d0218a4440163385ac21c7b64a23ecb5a0ae7826c26c81089b60b2009181900360800190a150505050565b610b5761196f565b61087b6000611d7e565b610b6961196f565b600280546001600160a01b0319166001600160a01b0383169081179091556040519081527f6f8c206ce9f10423f2b99164314c3e6e47f872d0d56a1c072c5e5bb4a9b9cd36906020015b60405180910390a150565b600854600090600160401b90046001600160401b03164211801590610bee57506008546001600160401b03164210155b8015610bfb575042600654105b15610c1057600654610c0d90426124ad565b90505b426006556000811561085e57600854600160801b90046001600160401b03168015610c5357600954610e1090610c4690856123e0565b610c509190612469565b91505b506000610c5e611564565b600854909150426001600160401b03909116108015610c81575060008161ffff16115b15610ecf576002546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610cce573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610cf29190612450565b600a54610d009084906123cd565b11610d4b578160086002016000828254610d1a91906123cd565b90915550610d2e905061ffff821683612469565b600b8054600090610d409084906123cd565b90915550610ecf9050565b6002546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610d93573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610db79190612450565b600a541015610ecf57600a546002546040516370a0823160e01b815230600482015261ffff841692916001600160a01b0316906370a0823190602401602060405180830381865afa158015610e10573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e349190612450565b610e3e91906124ad565b610e489190612469565b600b8054600090610e5a9084906123cd565b90915550506002546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015610ea7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ecb9190612450565b600a555b505050565b610edc61196f565b60005b8251811015610ecf57828181518110610efa57610efa612350565b602002602001015160046000848481518110610f1857610f18612350565b6020026020010151815260200190815260200160002060006101000a81548160ff021916908360ff1602179055508080610f51906123b4565b915050610edf565b610f6161196f565b610f69610bbe565b60098190556040518181527ffa93e4da71ed3ee8dcf7b91dfa77d3b58456a629609ad05b3960a9005ec4920c90602001610bb3565b610fa66119c9565b336000908152600360205260408120549003610fd5576040516393c2cdc760e01b815260040160405180910390fd5b8060005b818110156111c45733600c6000868685818110610ff857610ff8612350565b60209081029290920135835250810191909152604001600020546001600160a01b03161461102557600080fd5b6000600c600086868581811061103d5761103d612350565b6020908102929092013583525081019190915260400160002080546001600160a01b0319166001600160a01b039283161790557f000000000000000000000000d16e7b3b91f96d027ab46a951fa7f81708f9e7bc166323b872dd30338787868181106110ab576110ab612350565b6040516001600160e01b031960e088901b1681526001600160a01b03958616600482015294909316602485015250602090910201356044820152606401600060405180830381600087803b15801561110257600080fd5b505af1158015611116573d6000803e3d6000fd5b505050506001600560006004600088888781811061113657611136612350565b6020908102929092013583525081810192909252604090810160009081205460ff1684529183019390935291018120805490919061117990849061ffff166124c0565b825461ffff9182166101009390930a9283029190920219909116179055503360009081526003602052604090206111b39060040182611dce565b506111bd816123b4565b9050610fd9565b5033600090815260036020526040812080548392906111e49084906124ad565b90915550503360009081526003602052604090204260019091015560088054829190601090611224908490600160801b90046001600160401b03166124db565b92506101000a8154816001600160401b0302191690836001600160401b03160217905550336001600160a01b03167f155b8fa10c7506c4abd48e722aab6cadc4a286bcbcc4576dd0e3c2f1ad335a88848460405161084c929190612417565b61128b6119c9565b3360009081526003602052604081205490036112ba576040516393c2cdc760e01b815260040160405180910390fd5b6112c2611a22565b8060005b818110156114d55733600c60008686858181106112e5576112e5612350565b60209081029290920135835250810191909152604001600020546001600160a01b03161461131257600080fd5b7f000000000000000000000000d16e7b3b91f96d027ab46a951fa7f81708f9e7bc6001600160a01b03166323b872dd303387878681811061135557611355612350565b6040516001600160e01b031960e088901b1681526001600160a01b03958616600482015294909316602485015250602090910201356044820152606401600060405180830381600087803b1580156113ac57600080fd5b505af11580156113c0573d6000803e3d6000fd5b505050506000600c60008686858181106113dc576113dc612350565b90506020020135815260200190815260200160002060006101000a8154816001600160a01b0302191690836001600160a01b031602179055506001600560006004600088888781811061143157611431612350565b6020908102929092013583525081810192909252604090810160009081205460ff1684529183019390935291018120805490919061147490849061ffff166124c0565b92506101000a81548161ffff021916908361ffff1602179055506114c48484838181106114a3576114a3612350565b33600090815260036020908152604090912060040193910201359050611dce565b506114ce816123b4565b90506112c6565b5033600090815260036020526040812080548392906114f59084906124ad565b909155505033600081815260036020526040902042600190910155600b549061151d90611bd4565b61ffff1661152b91906123e0565b336000908152600360208190526040909120015560088054829190601090611224908490600160801b90046001600160401b03166124db565b600754600560008181526020919091527f458b30c2d72bfd2c6317304a4594ecbafe5f729d3111b65fdc3a33bd48e5432d5490916115b191630100000090910460ff169061ffff166124fb565b600754600460005260056020527f3eec716f11ba9e820c81ca75eb978ffb45831ef8b7a53e5e422c26008e1ca6d5546115f79162010000900460ff169061ffff166124fb565b600754600360005260056020527fa9bc9a3a348c357ba16b37005d7e6b3236198c0e939f4af8c5f19b8deeb8ebc05461163c91610100900460ff169061ffff166124fb565b6007546000805260056020527f05b8ccbb9d4d8fb16ea74ce3c29a41f1b461fbdaff4714a0d9a8eb05499746bc5461167b9160ff169061ffff166124fb565b6116859190612399565b61168f9190612399565b6116999190612399565b905090565b6116a661196f565b6001600160a01b0381166117105760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b60648201526084015b60405180910390fd5b61171981611d7e565b50565b6001600160a01b03811660009081526003602052604081205415806117aa57506002546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa158015611784573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906117a89190612450565b155b806118215750600a546002546040516370a0823160e01b81523060048201526001600160a01b03909116906370a0823190602401602060405180830381865afa1580156117fb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061181f9190612450565b105b1561182e57506000919050565b6001600160a01b03821660009081526003602052604081209061185084611bd4565b600183015460085491925060009182916001600160401b039091161161190057600854600160401b90046001600160401b03164210156118a057600184015461189990426124ad565b9150611900565b600854600160401b90046001600160401b0316421180156118d657506001840154600854600160401b90046001600160401b0316115b156119005760018401546008546118fd9190600160401b90046001600160401b03166124ad565b91505b610e1061190b611564565b61ffff166008600101548461192091906123e0565b61192a9190612469565b6119349190612469565b600b5461194191906123cd565b905060008460030154828561ffff1661195a91906123e0565b61196491906124ad565b979650505050505050565b6000546001600160a01b0316331461087b5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401611707565b600260015403611a1b5760405162461bcd60e51b815260206004820152601f60248201527f5265656e7472616e637947756172643a207265656e7472616e742063616c6c006044820152606401611707565b6002600155565b611a2a610bbe565b6000611a3533611dda565b90506000611a4233611bd4565b33600090815260036020526040812042600190910155909150829003611a66575050565b600a548211801590611ae257506002546040516370a0823160e01b815230600482015283916001600160a01b0316906370a0823190602401602060405180830381865afa158015611abb573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611adf9190612450565b10155b1561085e578160086002016000828254611afc91906124ad565b90915550611b079050565b600b54611b189061ffff83166123e0565b33600090815260036020819052604082209081019290925560029091018054849290611b459084906123cd565b909155505060025460405163a9059cbb60e01b8152336004820152602481018490526001600160a01b039091169063a9059cbb906044016020604051808303816000875af1158015611b9b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ecf919061248b565b6000611bcb8383611e2b565b90505b92915050565b6001600160a01b03811660009081526003602052604081208190611bfa90600401611d6a565b905060005b8151811015611d635760046000838381518110611c1e57611c1e612350565b602090810291909101810151825281019190915260400160009081205460ff169003611c5b57600754611c549060ff1684612399565b9250611d51565b60046000838381518110611c7157611c71612350565b60209081029190910181015182528101919091526040016000205460ff16600303611cab57600754611c5490610100900460ff1684612399565b60046000838381518110611cc157611cc1612350565b60209081029190910181015182528101919091526040016000205460ff16600403611cfc57600754611c549062010000900460ff1684612399565b60046000838381518110611d1257611d12612350565b60209081029190910181015182528101919091526040016000205460ff16600503611d5157600754611d4e906301000000900460ff1684612399565b92505b80611d5b816123b4565b915050611bff565b5050919050565b60606000611d7783611e7a565b9392505050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6000611bcb8383611ed6565b6001600160a01b038116600090815260036020526040812081611dfc84611bd4565b6003830154600b54919250600091611e189061ffff85166123e0565b611e2291906124ad565b95945050505050565b6000818152600183016020526040812054611e7257508154600181810184556000848152602080822090930184905584548482528286019093526040902091909155611bce565b506000611bce565b606081600001805480602002602001604051908101604052809291908181526020018280548015611eca57602002820191906000526020600020905b815481526020019060010190808311611eb6575b50505050509050919050565b60008181526001830160205260408120548015611fbf576000611efa6001836124ad565b8554909150600090611f0e906001906124ad565b9050818114611f73576000866000018281548110611f2e57611f2e612350565b9060005260206000200154905080876000018481548110611f5157611f51612350565b6000918252602080832090910192909255918252600188019052604090208390555b8554869080611f8457611f84612521565b600190038181906000526020600020016000905590558560010160008681526020019081526020016000206000905560019350505050611bce565b6000915050611bce565b5092915050565b80356001600160401b0381168114611fe757600080fd5b919050565b60008060408385031215611fff57600080fd5b61200883611fd0565b915061201660208401611fd0565b90509250929050565b6000806020838503121561203257600080fd5b82356001600160401b038082111561204957600080fd5b818501915085601f83011261205d57600080fd5b81358181111561206c57600080fd5b8660208260051b850101111561208157600080fd5b60209290920196919550909350505050565b803560ff81168114611fe757600080fd5b6000602082840312156120b657600080fd5b611bcb82612093565b6001600160a01b038116811461171957600080fd5b6000602082840312156120e657600080fd5b8135611d77816120bf565b600060a082018783526020878185015260a0604085015281875180845260c086019150828901935060005b818110156121385784518352938301939183019160010161211c565b50506060850196909652505050608001529392505050565b60006020828403121561216257600080fd5b5035919050565b6000806000806080858703121561217f57600080fd5b61218885612093565b935061219660208601612093565b92506121a460408601612093565b91506121b260608601612093565b905092959194509250565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f191681016001600160401b03811182821017156121fb576121fb6121bd565b604052919050565b60006001600160401b0382111561221c5761221c6121bd565b5060051b60200190565b600082601f83011261223757600080fd5b8135602061224c61224783612203565b6121d3565b82815260059290921b8401810191818101908684111561226b57600080fd5b8286015b84811015612286578035835291830191830161226f565b509695505050505050565b600080604083850312156122a457600080fd5b82356001600160401b03808211156122bb57600080fd5b818501915085601f8301126122cf57600080fd5b813560206122df61224783612203565b82815260059290921b840181019181810190898411156122fe57600080fd5b948201945b838610156123235761231486612093565b82529482019490820190612303565b9650508601359250508082111561233957600080fd5b5061234685828601612226565b9150509250929050565b634e487b7160e01b600052603260045260246000fd5b60006020828403121561237857600080fd5b8151611d77816120bf565b634e487b7160e01b600052601160045260246000fd5b61ffff818116838216019080821115611fc957611fc9612383565b6000600182016123c6576123c6612383565b5060010190565b80820180821115611bce57611bce612383565b8082028115828204841417611bce57611bce612383565b6001600160401b03818116838216019080821115611fc957611fc9612383565b6020808252810182905260006001600160fb1b0383111561243757600080fd5b8260051b80856040850137919091016040019392505050565b60006020828403121561246257600080fd5b5051919050565b60008261248657634e487b7160e01b600052601260045260246000fd5b500490565b60006020828403121561249d57600080fd5b81518015158114611d7757600080fd5b81810381811115611bce57611bce612383565b61ffff828116828216039080821115611fc957611fc9612383565b6001600160401b03828116828216039080821115611fc957611fc9612383565b61ffff81811683821602808216919082811461251957612519612383565b505092915050565b634e487b7160e01b600052603160045260246000fdfea2646970667358221220cdeb34b92783dc0a885c41339e32f36d9304454656bccc6b1441c3008281af5864736f6c63430008120033